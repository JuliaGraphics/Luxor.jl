<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Placing images · Luxor</title><meta name="title" content="Placing images · Luxor"/><meta property="og:title" content="Placing images · Luxor"/><meta property="twitter:title" content="Placing images · Luxor"/><meta name="description" content="Documentation for Luxor."/><meta property="og:description" content="Documentation for Luxor."/><meta property="twitter:description" content="Documentation for Luxor."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/luxor-docs.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Luxor logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Luxor</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction to Luxor</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorial/helloworld/">Hello World</a></li><li><a class="tocitem" href="../../tutorial/basicpath/">Basic path building</a></li><li><a class="tocitem" href="../../tutorial/quickstart/">Design a logo</a></li><li><a class="tocitem" href="../../tutorial/basictutorial/">Geometry tutorial</a></li><li><a class="tocitem" href="../../tutorial/pixels/">Playing with pixels</a></li><li><a class="tocitem" href="../../tutorial/simple-animation/">Simple animation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../example/examples/">Simple examples</a></li><li><a class="tocitem" href="../../example/moreexamples/">More examples</a></li><li><a class="tocitem" href="../../example/gallery/">Gallery</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">How to guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../createdrawings/">Create drawings</a></li><li><a class="tocitem" href="../simplegraphics/">Draw simple shapes</a></li><li><a class="tocitem" href="../geometrytools/">Use geometry tools</a></li><li><a class="tocitem" href="../tables-grids/">Work with tables and grids</a></li><li><a class="tocitem" href="../colors-styles/">Use colors and styles</a></li><li><a class="tocitem" href="../polygons/">Work with polygons</a></li><li><a class="tocitem" href="../text/">Add text</a></li><li><a class="tocitem" href="../clipping/">Clip graphics</a></li><li class="is-active"><a class="tocitem" href>Placing images</a><ul class="internal"><li><a class="tocitem" href="#Loading-and-placing-images-on-drawings"><span>Loading and placing images on drawings</span></a></li><li><a class="tocitem" href="#SVG-images"><span>SVG images</span></a></li><li><a class="tocitem" href="#EPS-images"><span>EPS images</span></a></li><li><a class="tocitem" href="#Placing-an-image-matrix"><span>Placing an image matrix</span></a></li><li><a class="tocitem" href="#Clipping-images"><span>Clipping images</span></a></li><li><a class="tocitem" href="#Transforming-images"><span>Transforming images</span></a></li><li><a class="tocitem" href="#Combining-images-and-vector-graphics"><span>Combining images and vector graphics</span></a></li><li><a class="tocitem" href="#Image-compositing"><span>Image compositing</span></a></li></ul></li><li><a class="tocitem" href="../turtle/">Turtle graphics</a></li><li><a class="tocitem" href="../animation/">Make animations</a></li><li><a class="tocitem" href="../snapshots/">Snapshots</a></li><li><a class="tocitem" href="../livegraphics/">Interactive graphics and Threads</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Explanations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../explanation/basics/">Basic concepts</a></li><li><a class="tocitem" href="../../explanation/pathspolygons/">Paths vs Polygon</a></li><li><a class="tocitem" href="../../explanation/perfectpixels/">Perfect pixels and antialising</a></li><li><a class="tocitem" href="../../explanation/transforms/">Transforms and matrices</a></li><li><a class="tocitem" href="../../explanation/imagematrix/">Image matrix</a></li><li><a class="tocitem" href="../../explanation/fonts/">Fonts on Linux</a></li><li><a class="tocitem" href="../../explanation/luxorcairo/">Luxor and Cairo</a></li><li><a class="tocitem" href="../../explanation/strokepathdispatch/">Customize strokepath/fillpath</a></li><li><a class="tocitem" href="../../explanation/contributing/">Contributing</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/functionindex/">Alphabetical function list</a></li><li><a class="tocitem" href="../../reference/api/">Function reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How to guides</a></li><li class="is-active"><a href>Placing images</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Placing images</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaGraphics/Luxor.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaGraphics/Luxor.jl/blob/master/docs/src/howto/images.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Placing-images"><a class="docs-heading-anchor" href="#Placing-images">Placing images</a><a id="Placing-images-1"></a><a class="docs-heading-anchor-permalink" href="#Placing-images" title="Permalink"></a></h1><h2 id="Loading-and-placing-images-on-drawings"><a class="docs-heading-anchor" href="#Loading-and-placing-images-on-drawings">Loading and placing images on drawings</a><a id="Loading-and-placing-images-on-drawings-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-and-placing-images-on-drawings" title="Permalink"></a></h2><p>Luxor lets you place existing images on the drawing. You can place PNG, SVG, and EPS images. (JPEGs aren&#39;t supported.)</p><p>For PNG and SVG, first load the image and create a reference to it. For example:</p><ul><li>for PNG images, use <code>img = readpng(filename)</code></li><li>for SVG images, use <code>img = readsvg(filename)</code> or <code>img = readsvg(string)</code></li></ul><p>You can access this image&#39;s dimensions with <code>img.width</code> and <code>img.height</code>.</p><p>Use <a href="../../reference/api/#Luxor.placeimage"><code>placeimage(img)</code></a> to place the image by its top left corner at point <code>pt</code>. Use the <code>centered=true</code> keyword to place the image&#39;s center point there. </p><pre><code class="language-julia hljs">img = readpng(&quot;../assets/figures/julia-logo-mask.png&quot;)
w = img.width
h = img.height
rulers()
scale(0.3, 0.3)
rotate(π/4)
placeimage(img, Point(-w/2, -h/2), .5)
sethue(&quot;red&quot;)
circle(-w/2, -h/2, 15, :fill)</code></pre><p><img src="../../assets/figures/images.png" alt="&quot;Images&quot;"/></p><p>PNG images can be placed with varying opacity or transparency. For example, the image is placed with 0.5 opacity with:</p><pre><code class="language-julia hljs">placeimage(img, Point(100, 100), 0.5)</code></pre><p>SVG images do their own thing in terms of opacity.</p><p><a href="../../reference/api/#Luxor.readsvg-Tuple{Any}"><code>readsvg</code></a> also lets you supply raw (or pure) SVG code in a string.</p><p>You can use <code>placeimage()</code> to place an array of RGB or RGBA pixels on a drawing.</p><pre><code class="language-julia hljs">N = 500
i = reshape([RGBA(rand(4)...) for p in 1:N^2], N, N)
# i is Matrix{RGBA{Float64}}
# (alias for Array{RGBA{Float64}, 2})
@draw begin
  origin()
  sethue(&quot;orange&quot;)
  box(O, N/2, N/2, :fill)
  placeimage(i, O, centered=true, alpha=0.5)
end 500 500</code></pre><img src="4cf26bf8.png" alt="Example block output"/><p>Or you can load an image as an array and place it on a drawing.</p><pre><code class="language-julia hljs">using Luxor, Colors, FileIO
img = load(dirname(dirname(pathof(Luxor))) * &quot;/docs/src/assets/figures/42.png&quot;)
@draw begin
    img[1:50, :] .= colorant&quot;cyan&quot;
    img[200:end, :] .= colorant&quot;magenta&quot;
    placeimage(img, O, centered=true, alpha=0.5)
end 250 250</code></pre><p><img src="../../assets/figures/42mod.png" alt="&quot;Images&quot;"/></p><h2 id="SVG-images"><a class="docs-heading-anchor" href="#SVG-images">SVG images</a><a id="SVG-images-1"></a><a class="docs-heading-anchor-permalink" href="#SVG-images" title="Permalink"></a></h2><p>To output a drawing as an SVG image, using the <code>Drawing(... :svg)</code> or specify an SVG filename. To obtain the SVG source of a <em>completed</em> SVG drawing, use <a href="../../reference/api/#Luxor.svgstring-Tuple{}"><code>svgstring</code></a>.</p><p>For example, if you draw the Julia logo like this:</p><pre><code class="language-julia hljs">Drawing(500, 500, :svg)
origin()
julialogo()
finish()
s = svgstring()</code></pre><p>You&#39;ll get the SVG source code stored, as a string, in <code>s</code>. You can examine or process it further. For example, the five colors used for the logo were:</p><pre><code class="language-julia hljs">eachmatch(r&quot;rgb\\(.*?\\)&quot;, s) |&gt; collect
5-element Vector{RegexMatch}:
 RegexMatch(&quot;rgb(0%,0%,0%)&quot;)
 RegexMatch(&quot;rgb(79.6%,23.5%,20%)&quot;)
 RegexMatch(&quot;rgb(25.1%,38.8%,84.7%)&quot;)
 RegexMatch(&quot;rgb(58.4%,34.5%,69.8%)&quot;)
 RegexMatch(&quot;rgb(22%,59.6%,14.9%)&quot;)</code></pre><p>To display the image in a Jupyter or Pluto notebook, use the <code>HTML</code> function, or you can use the <a href="../../reference/api/#Luxor.readsvg-Tuple{Any}"><code>readsvg</code></a> and <a href="../../reference/api/#Luxor.placeimage"><code>placeimage</code></a> functions in combination.</p><h2 id="EPS-images"><a class="docs-heading-anchor" href="#EPS-images">EPS images</a><a id="EPS-images-1"></a><a class="docs-heading-anchor-permalink" href="#EPS-images" title="Permalink"></a></h2><p>EPS (Encapsulated PostScript) files created by Luxor (or any Cairo-based package) can be re-imported and placed on the current drawing with the <a href="../../reference/api/#Luxor.placeeps-Tuple{Any}"><code>placeeps</code></a> function. This function converts the EPS commands to the equivalent Luxor commands and evaluates them immediately in the context of the current drawing.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This function is designed to extract just the coordinates of paths from an EPS file. An EPS file can contain much more information about an image than coordinates: there migth be image and pixel data, font data, linear color gradients, and so on. These are <em>not</em> translated into equivalent Luxor functions. This function interprets the EPS commands in a Cairo-generated EPS &quot;Prolog&quot;; EPS files created by other applications will likely not contain this Cairo-generated Prolog, and so won&#39;t be interpreted at all (or will go wrong in interesting ways).</p></div></div><p>In this example, an SVG file <code>linnux.svg</code> is placed and exported to an EPS file <code>linux.eps</code>, then this EPS file is imported and placed on a new SVG drawing using Luxor functions instead of EPS commands, respecting the current scale and orientation. Finally, when the SVG document is finished, the graphics will be in SVG format again.</p><pre><code class="language-julia hljs">using Luxor

svgfile = dirname(@__FILE__) * &quot;../assets/figures/linux.svg&quot;
epsfile = dirname(@__FILE__) * &quot;../assets/figures/linux.eps&quot;

@eps begin
    img = readsvg(svgfile)
    placeimage(img, centered = true)
end 500 500 epsfile

@drawsvg begin
    translate(midpoint(boxtopleft(), O))
    scale(0.5)
    rotate(π/12)
    placeeps(epsfile)
    rulers()
end</code></pre><img src="26471c4f.svg" alt="Example block output"/><p>If you want to obtain the paths and coordinates for use elsewhere, you can use the <code>log=true</code> function, which sends the commands to the REPL as well:</p><pre><code class="language-julia hljs">placeeps(&quot;/tmp/linux.eps&quot;, log=true)

# start EPS import
gsave()
setgray(1.0)
move(Point(70.801, -6.0))
line(Point(429.199, -6.0))
curve(Point(471.617, -6.0), Point(506.0, 28.383), Point(506.0, 70.801))
line(Point(506.0, 429.199))
curve(Point(506.0, 471.617), Point(471.617, 506.0), Point(429.199, 506.0))
line(Point(70.801, 506.0))
curve(Point(28.383, 506.0), Point(-6.0, 471.617), Point(-6.0, 429.199))
line(Point(-6.0, 70.801))
curve(Point(-6.0, 28.383), Point(28.383, -6.0), Point(70.801, -6.0))
closepath()
move(Point(70.801, -6.0))
fillpath()
...</code></pre><p>Once you have a sequence of Luxor commands, you can edit them into new creations:</p><p><img src="../../assets/figures/linux.gif" alt="&quot;drawing a penguin animation&quot;"/></p><h2 id="Placing-an-image-matrix"><a class="docs-heading-anchor" href="#Placing-an-image-matrix">Placing an image matrix</a><a id="Placing-an-image-matrix-1"></a><a class="docs-heading-anchor-permalink" href="#Placing-an-image-matrix" title="Permalink"></a></h2><p>You can use <a href="../../reference/api/#Luxor.placeimage"><code>placeimage</code></a> to put pixel images on a drawing.</p><p>This example uses noise to define the RGB values in a matrix of ARGB32 color values:</p><pre><code class="language-julia hljs">D = 600
mat = [Luxor.ARGB32(
    noise(0.01r, 0.01c),
    noise(0.1r, 0.02c),
    noise(0.1r, 0.01c)) for r in 1:D ÷ 2, c in 1:D]

@draw begin
    background(&quot;grey60&quot;)
    placeimage(mat, boxtopleft())
    fontsize(80)
    sethue(&quot;white&quot;)
    setopacity(0.5)
    text(&quot;woah&quot;, halign=:center)
end D D ÷ 2</code></pre><img src="bb486d1a.png" alt="Example block output"/><p>The next example saves vector graphics into an image matrix, then places that matrix at random on another drawing.</p><pre><code class="language-julia hljs">using Luxor

mat = @imagematrix begin    
    juliacircles(6)
end 40 40

@draw begin
    for i in 1:500
        pos = rand(BoundingBox())
        @layer begin
            translate(pos)
            rotate(rand() * 2π)
            placeimage(mat, centered = rand(Bool))
        end
    end
end</code></pre><p><img src="../../assets/figures/place-image-matrix.png" alt="place image matrix"/></p><p><a href="../../reference/api/#Luxor.placeimage"><code>placeimage</code></a> can also take in an optional argument <code>alpha</code> to change the opacity of the image matrix.</p><p><img src="../../assets/figures/place-image-matrix-alpha.png" alt="place image matrix alpha"/></p><h2 id="Clipping-images"><a class="docs-heading-anchor" href="#Clipping-images">Clipping images</a><a id="Clipping-images-1"></a><a class="docs-heading-anchor-permalink" href="#Clipping-images" title="Permalink"></a></h2><p>You can clip images. The following script repeatedly places the image using a circle to define a clipping path:</p><p><img src="../../assets/figures/test-image.png" alt="&quot;Images&quot;"/></p><pre><code class="language-julia hljs">using Luxor

width, height = 4000, 4000
margin = 500

fname = &quot;test-image.pdf&quot;
Drawing(width, height, fname)
origin()
background(&quot;grey25&quot;)

setline(5)
sethue(&quot;green&quot;)

image = readpng(dirname(@__FILE__) * &quot;../assets/figures/julia-logo-mask.png&quot;)

w = image.width
h = image.height

pagetiles = Tiler(width, height, 7, 9)
tw = pagetiles.tilewidth/2
for (pos, n) in pagetiles
    circle(pos, tw, :stroke)
    circle(pos, tw, :clip)
    gsave()
    translate(pos)
    scale(.95, .95)
    rotate(rand(0.0:π/8:2π))
    placeimage(image, O, centered=true)
    grestore()
    clipreset()
end

finish()</code></pre><h2 id="Transforming-images"><a class="docs-heading-anchor" href="#Transforming-images">Transforming images</a><a id="Transforming-images-1"></a><a class="docs-heading-anchor-permalink" href="#Transforming-images" title="Permalink"></a></h2><p>You can transform images by setting the current matrix, either with <a href="../../reference/api/#Luxor.scale-Tuple{Real, Real}"><code>scale</code></a> and <a href="../../reference/api/#Luxor.rotate-Tuple{Any}"><code>rotate</code></a> and similar, or by modifying it directly. This code scales and rotates an image made in an earlier chapter of this document around in a circle:</p><pre><code class="language-julia hljs">img = readpng(dirname(dirname(pathof(Luxor))) * &quot;/docs/src/assets/figures/textoutlines.png&quot;)
w = img.width
h = img.height
for θ in 0:π/6:2π-π/6
    gsave()
    scale(.4, .4)
    rotate(θ)
    translate(300, 0)
    placeimage(img, -w/2, -h/2, 0.9)
    grestore()
end</code></pre><p><img src="../../assets/figures/transform-images.png" alt="transforming images"/></p><h2 id="Combining-images-and-vector-graphics"><a class="docs-heading-anchor" href="#Combining-images-and-vector-graphics">Combining images and vector graphics</a><a id="Combining-images-and-vector-graphics-1"></a><a class="docs-heading-anchor-permalink" href="#Combining-images-and-vector-graphics" title="Permalink"></a></h2><p>You sometimes want to combine vector graphics and images, for example, to annotate them with text or vector graphics.</p><p>There are two ways you can do this: </p><ul><li><p>by adding the image with <code>placeimage()</code> and then drawing vector graphics on top. </p></li><li><p>by opening the image as a drawing, and adding vector graphics into the image. </p></li></ul><p>The things to be aware of are mostly to do with coordinates and transforms.</p><h3 id="Adding-graphics-on-top"><a class="docs-heading-anchor" href="#Adding-graphics-on-top">Adding graphics on top</a><a id="Adding-graphics-on-top-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-graphics-on-top" title="Permalink"></a></h3><p>In this example, we&#39;ll annotate a PNG file.</p><pre><code class="language-julia hljs">image = readpng(&quot;../assets/figures/julia-logo-mask.png&quot;)

w = image.width
h = image.height

# create a drawing surface of the same size

fname = &quot;../assets/figures/drawing_on_images.png&quot;
Drawing(w, h, fname)

# place the image on the Drawing - it&#39;s positioned by its top/left corner

placeimage(image, 0, 0)

# now you can annotate the image. The (0/0) is at the top left.

sethue(&quot;red&quot;)
setline(1)
fontsize(16)
circle(Point(150, 50), 2, :fill)
label(&quot;(150/50)&quot;, :NE, Point(150, 50), leader=true, offset=25)

arrow(Point(w/2, 90), Point(0, 90))
arrow(Point(w/2, 90), Point(w, 90))
text(&quot;width $w&quot;, Point(w/2, 70), halign=:center)

# to divide up the image into rectangular areas and number them,
# temporarily position the axes at the center:

@layer begin
  setline(0.5)
  sethue(&quot;green&quot;)
  fontsize(12)
  translate(w/2, h/2)
  tiles = Tiler(w, h, 8, 8, margin=0)
  for (pos, n) in tiles
      box(pos, tiles.tilewidth, tiles.tileheight, :stroke)
      text(string(n-1), pos, halign=:center)
  end
end</code></pre><p><img src="../../assets/figures/drawing_on_images.png" alt="drawing on images"/></p><h4 id="Adding-text-to-transformed-placed-images"><a class="docs-heading-anchor" href="#Adding-text-to-transformed-placed-images">Adding text to transformed placed images</a><a id="Adding-text-to-transformed-placed-images-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-text-to-transformed-placed-images" title="Permalink"></a></h4><p>The above approach works well, but suppose you want to locate the working origin at the lower left of the image, i.e. you want all coordinates to be relative to the bottom left corner of the image?</p><p>To do this, use <a href="../../reference/api/#Luxor.translate-Tuple{Real, Real}"><code>translate</code></a> and <a href="../../reference/api/#Luxor.transform-Tuple{Array}"><code>transform</code></a> to modify the drawing space:</p><pre><code class="language-julia hljs">image = readpng(&quot;../assets/figures/julia-logo-mask.png&quot;)
w = image.width
h = image.height
fname = &quot;../assets/figures/drawing_on_images_2.png&quot;
Drawing(w, h, fname)
placeimage(image, 0, 0)

# Move the axes to the bottom:

translate(0, h)

# and reflect in the x-axis

transform([1 0 0 -1 0 0])

# now 0/0 is at the bottom left corner, and 100/100 is up and to the right.

sethue(&quot;blue&quot;)
arrow(Point(200, 300), Point(160, 300))

# However, don&#39;t draw text while flipped, because it will be reversed!

fontsize(20)
sethue(&quot;black&quot;)
text(&quot;Oh no!&quot;, Point(30, 250))

# To work around this, define a text function
# that flips the workspace over the x-axis just for the text:

function textoverlay(t, pos; kwargs...)
    @layer begin
        translate(pos)
        transform([1 0 0 -1 0 0])
        text(t, O; kwargs...)
    end
end

textoverlay(&quot;a tittle!&quot;, Point(200, 300), halign=:left, valign=:middle)
textoverlay(&quot;0/0&quot;, O)
arrow(Point(130, 400), Point(130, 340))</code></pre><p><img src="../../assets/figures/drawing_on_images_2.png" alt="drawing on transformed images"/></p><h3 id="Opening-the-image-as-drawing"><a class="docs-heading-anchor" href="#Opening-the-image-as-drawing">Opening the image as drawing</a><a id="Opening-the-image-as-drawing-1"></a><a class="docs-heading-anchor-permalink" href="#Opening-the-image-as-drawing" title="Permalink"></a></h3><p>An alternative way to work with images is to open the image as a drawing. Let&#39;s open the well-known mandrill image in Luxor. (I&#39;ll call him Marvin, because I couldn&#39;t find out whether or not the model had a name, but I think he should have one.)</p><pre><code class="language-julia hljs">using Luxor, Colors, Images, TestImages

marvin = testimage(&quot;mandrill&quot;)
M = Luxor.Colors.ARGB32.(marvin)
Drawing(M)</code></pre><p>The current drawing is now a 512 × 512 array, where each pixel is an ARGB32 (an unsigned 32-bit integer holding 4 8-bit vaalues).</p><p>Marvin&#39;s right eye (on the left side of the drawing) is located at about 60 rows down, 175 columns across. Let&#39;s fill in his pupil with a white square:</p><pre><code class="language-julia hljs">M[55:65, 170:180] .= colorant&quot;white&quot;
M</code></pre><p><img src="../../assets/figures/marvin-1.png" alt="drawing into image"/></p><p>Using <code>M</code> on its own should show the image in your notebook or code editor (but not the REPL). If you want to save it, using the standard Images.jl functions.</p><p>We can use these indices as x and y coordinates, since the drawing origin is also currently at the top left.</p><pre><code class="language-julia hljs">sethue(&quot;white&quot;)
circle(Point(60, 175), 20, :stroke)
M</code></pre><p>If we want to draw, say, a 10 by 10 numbered grid overlay on top of Marvin, and highlight four numbered cells, it&#39;s easier to just add a <code>transform()</code> function that flips the x/cols and y/rows convention, then create a table centered at the center of the drawing:</p><pre><code class="language-julia hljs">fontsize(15)
sethue(&quot;white&quot;)
setline(1)
transform([0 1 1 0 0 0])
t = Table(10, 10, 512 / 10, 512 / 10, Point(512 / 2, 512 / 2))
for (pos, n) in t
    text(string(n), pos, halign = :center, valign = :middle)
    box(pos, 512 / 10, 512 / 10, :stroke)
end
setline(5)
sethue(&quot;blue&quot;)
markcells(t, getcells(t, [2, 4, 35, 69]))
M</code></pre><p><img src="../../assets/figures/marvin-2.png" alt="drawing into image"/></p><h2 id="Image-compositing"><a class="docs-heading-anchor" href="#Image-compositing">Image compositing</a><a id="Image-compositing-1"></a><a class="docs-heading-anchor-permalink" href="#Image-compositing" title="Permalink"></a></h2><p>You should be using <a href="https://github.com/JuliaImages">Images.jl</a> for most tasks involving image editing. But if you just need to composite images together, you can use the blending modes provided by <a href="../../reference/api/#Luxor.setmode-Tuple{AbstractString}"><code>setmode</code></a>.</p><pre><code class="language-julia hljs">img = readpng(&quot;../assets/figures/textoutlines.png&quot;)
w = img.width
h = img.height

placeimage(img, -w/2, -h/2, .5)
setmode(&quot;saturate&quot;)
translate(50, 0)
placeimage(img, -w/2, -h/2, .5)</code></pre><p><img src="../../assets/figures/image-compositing.png" alt="transforming images"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../clipping/">« Clip graphics</a><a class="docs-footer-nextpage" href="../turtle/">Turtle graphics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Sunday 14 January 2024 10:14">Sunday 14 January 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
