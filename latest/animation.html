<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Animation · Luxor</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Ubuntu+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="Luxor logo"/></a><h1>Luxor</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Introduction to Luxor</a></li><li><a class="toctext" href="examples.html">A few examples</a></li><li><a class="toctext" href="basics.html">Basic graphics</a></li><li><a class="toctext" href="colors-styles.html">Colors and styles</a></li><li><a class="toctext" href="polygons.html">Polygons</a></li><li><a class="toctext" href="text.html">Text</a></li><li><a class="toctext" href="transforms.html">Transforms and matrices</a></li><li><a class="toctext" href="clipping.html">Clipping</a></li><li><a class="toctext" href="images.html">Images</a></li><li><a class="toctext" href="turtle.html">Turtle graphics</a></li><li class="current"><a class="toctext" href="animation.html">Animation</a><ul class="internal"><li><a class="toctext" href="#Example-1">Example</a></li><li><a class="toctext" href="#Making-the-animation-1">Making the animation</a></li><li><a class="toctext" href="#Using-scenes-1">Using scenes</a></li><li><a class="toctext" href="#Easing-functions-1">Easing functions</a></li></ul></li><li><a class="toctext" href="moreexamples.html">More examples</a></li><li><a class="toctext" href="functionindex.html">Index</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="animation.html">Animation</a></li></ul><a class="edit-page" href="https://github.com/JuliaGraphics/Luxor.jl/tree/79313656b498581f67b3ba2e419fef53f09650f8/docs/src/animation.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Animation-helper-functions-1" href="#Animation-helper-functions-1">Animation helper functions</a></h1><p>Luxor provides some functions to help you create animations—at least, it provides some assistance in creating lots of individual frames that can later be stitched together to form a moving animation, such as a GIF or MP4.</p><p>There are four steps to creating an animation.</p><p>1 Use <code>Movie</code> to create a Movie object which determines the title and dimensions.</p><p>2 Define some functions that draw the graphics for specific frames.</p><p>3 Define one or more Scenes that call the functions.</p><p>4 Call the <code>animate(movie::Movie, scenes)</code> function, passing in the scenes. This creates all the frames and saves them in a temporary directory. Optionally, you can ask for <code>ffmpeg</code> to make an animated GIF.</p><h2><a class="nav-anchor" id="Example-1" href="#Example-1">Example</a></h2><pre><code class="language-julia">using Luxor

demo = Movie(400, 400, &quot;test&quot;)

function backdrop(scene, framenumber)
    background(&quot;black&quot;)
end

function frame(scene, framenumber)
    sethue(Colors.HSV(framenumber, 1, 1))
    eased_n = scene.easingfunction(framenumber, 0, 1, scene.framerange.stop)
    circle(polar(100, -pi/2 - (eased_n * 2pi)), 80, :fill)
    text(string(&quot;frame $framenumber of $(scene.framerange.stop)&quot;),
        Point(O.x, O.y-190),
        halign=:center)
end

animate(demo, [
    Scene(demo, backdrop, 0:359),
    Scene(demo, frame, 0:359, easingfunction=easeinoutcubic)
    ],
    creategif=true)</code></pre><p><img src="assets/figures/animation.gif" alt="animation example"/></p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.Movie" href="#Luxor.Movie"><code>Luxor.Movie</code></a> — <span class="docstring-category">Type</span>.</div><div><p>The <code>Movie</code> and <code>Scene</code> types and the <code>animate()</code> function are designed to help you create the frames that can be used to make an animated GIF or movie.</p><p>1 Provide width, height, title, and frame range to the Movie constructor:</p><pre><code class="language-none">demo = Movie(400, 400, &quot;test&quot;, 1:100)</code></pre><p>2 Then define Scenes and scene-drawing functions.</p><p>2 Finally, run the <code>animate()</code> function, calling those functions.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/79313656b498581f67b3ba2e419fef53f09650f8/src/animate.jl#L1-L12">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.Scene" href="#Luxor.Scene"><code>Luxor.Scene</code></a> — <span class="docstring-category">Type</span>.</div><div><p>The Scene type defines a function to be used to render a range of frames in a movie.</p><ul><li><p><code>movie</code> created by Movie()</p></li><li><p><code>framefunction</code> is a function taking two arguments: the movie and the framenumber.</p></li><li><p><code>framerange</code> determines which frames are processed by the function. Defaults to the entire movie.</p></li><li><p><code>easingfunction</code> can be accessed by the framefunction to vary the transition speed</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/79313656b498581f67b3ba2e419fef53f09650f8/src/animate.jl#L35-L42">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.animate" href="#Luxor.animate"><code>Luxor.animate</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">animate(movie::Movie, scenelist::Array{Scene, 1};
        creategif=false,
        framerate=30)</code></pre><p>Create the movie defined in <code>movie</code> by rendering the frames define in the array of scenes in <code>scenelist</code>.</p><p>If <code>creategif</code> is <code>true</code>, the function tries to call <code>ffmpeg</code> on the resulting frames to build a GIF animation.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/79313656b498581f67b3ba2e419fef53f09650f8/src/animate.jl#L55-L65">source</a><br/><div><pre><code class="language-none">animate(movie::Movie, scene::Scene; creategif=false, framerate=30)</code></pre><p>Create the movie defined in <code>movie</code> by rendering the frames define in <code>scene</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/79313656b498581f67b3ba2e419fef53f09650f8/src/animate.jl#L111-L115">source</a><br/></section><h2><a class="nav-anchor" id="Making-the-animation-1" href="#Making-the-animation-1">Making the animation</a></h2><p>Building an animation such as a GIF or MOV file is best done outside Julia, using something like <code>ffmpeg</code>, with its thousands of options, which include frame-rate adjustment and color palette tweaking. The <code>animate</code> function has a go at running it on Unix platforms, and assumes that <code>ffmpeg</code> is installed. Inside <code>animate()</code>, the first pass creates a color palette, the second builds the file:</p><pre><code class="language-julia">run(`ffmpeg -f image2 -i $(tempdirectory)/%10d.png -vf palettegen -y $(seq.stitle)-palette.png`)

run(`ffmpeg -framerate 30 -f image2 -i $(tempdirectory)/%10d.png -i $(seq.stitle)-palette.png -lavfi paletteuse -y /tmp/$(seq.stitle).gif`)</code></pre><h2><a class="nav-anchor" id="Using-scenes-1" href="#Using-scenes-1">Using scenes</a></h2><p>Sometimes you want to construct an animation that has different components, layers, or scenes. To do this, specify scenes that are drawn only for specific frames.</p><p>As an example, consider a simple example showing the sun during a 24 hour day.</p><pre><code class="language-none">sun24demo = Movie(400, 400, &quot;sun24&quot;, 0:23)</code></pre><p>The <code>backgroundfunction</code> draws a background that&#39;s used for all frames:</p><pre><code class="language-none">function backgroundfunction(scene::Scene, framenumber)
    background(&quot;black&quot;)
end</code></pre><p>A <code>nightskyfunction</code> draws the night sky:</p><pre><code class="language-none">function nightskyfunction(scene::Scene, framenumber)
    sethue(&quot;midnightblue&quot;)
    box(O, 400, 400, :fill)
end</code></pre><p>A <code>dayskyfunction</code> draws the daytime sky:</p><pre><code class="language-none">function dayskyfunction(scene::Scene, framenumber)
    sethue(&quot;skyblue&quot;)
    box(O, 400, 400, :fill)
end</code></pre><p>The <code>sunfunction</code> draws a sun at 24 positions during the day:</p><pre><code class="language-none">function sunfunction(scene::Scene, framenumber)
    i = rescale(framenumber, 0, 23, 2pi, 0)
    gsave()
    sethue(&quot;yellow&quot;)
    circle(polar(150, i), 20, :fill)
    grestore()
end</code></pre><p>Finally a <code>groundfunction</code> draws the ground:</p><pre><code class="language-none">function groundfunction(scene::Scene, framenumber)
    gsave()
    sethue(&quot;brown&quot;)
    box(Point(O.x, O.y + 100), 400, 200, :fill)
    grestore()
    sethue(&quot;white&quot;)
end</code></pre><p>Now define a group of Scenes that make up the movie. The scenes specify which functions are to be used to create graphics, and for which frames:</p><pre><code class="language-none">backdrop  = Scene(sun24demo, backgroundfunction, 0:23)
nightsky  = Scene(sun24demo, nightskyfunction, 0:6)
nightsky1 = Scene(sun24demo, nightskyfunction, 17:23)
daysky    = Scene(sun24demo, dayskyfunction, 5:19)
sun       = Scene(sun24demo, sunfunction, 6:18)
ground    = Scene(sun24demo, groundfunction, 0:23)</code></pre><p>Finally, the <code>animate</code> function scans the scenes in the scenelist for a movie, and calls the functions for each frame to build the animation:</p><pre><code class="language-none">animate(sun24demo, [backdrop, nightsky, nightsky1, daysky, sun, ground],
    framerate=5,
    creategif=true)</code></pre><p><img src="assets/figures/sun24.gif" alt="sun24 animation"/></p><p>Notice that for some frames, such as frame 0, 1, or 23, three of the functions are called: for others, such as 7 and 8, five functions are called.</p><h2><a class="nav-anchor" id="Easing-functions-1" href="#Easing-functions-1">Easing functions</a></h2><p>Transitions for animations often use non-constant and non-linear motions, and these are usually provided by <em>easing</em> functions. Luxor defines some basic easing functions and they&#39;re listed in the array <code>Luxor.easingfunctions</code>.</p><footer><hr/><a class="previous" href="turtle.html"><span class="direction">Previous</span><span class="title">Turtle graphics</span></a><a class="next" href="moreexamples.html"><span class="direction">Next</span><span class="title">More examples</span></a></footer></article></body></html>
