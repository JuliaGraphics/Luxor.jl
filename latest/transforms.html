<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Transforms and matrices · Luxor</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Ubuntu+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="../versions.js"></script></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="Luxor logo"/></a><h1>Luxor</h1><form class="search" action="search.html"><select id="version-selector" onChange="window.location.href=this.value"><option value="#" selected="selected" disabled="disabled">Version</option></select><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Introduction to Luxor</a></li><li><a class="toctext" href="examples.html">A few examples</a></li><li><a class="toctext" href="basics.html">Basic graphics</a></li><li><a class="toctext" href="styling.html">Styling</a></li><li><a class="toctext" href="polygons.html">Polygons</a></li><li><a class="toctext" href="text.html">Text</a></li><li class="current"><a class="toctext" href="transforms.html">Transforms and matrices</a><ul class="internal"></ul></li><li><a class="toctext" href="clipping.html">Clipping</a></li><li><a class="toctext" href="images.html">Images</a></li><li><a class="toctext" href="turtle.html">Turtle graphics</a></li><li><a class="toctext" href="animation.html">Animation</a></li><li><a class="toctext" href="moreexamples.html">More examples</a></li><li><a class="toctext" href="functionindex.html">Index</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="transforms.html">Transforms and matrices</a></li></ul><a class="edit-page" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/docs/src/transforms.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Transforms-and-matrices-1" href="#Transforms-and-matrices-1">Transforms and matrices</a></h1><p>For basic transformations of the drawing space, use <code>scale(sx, sy)</code>, <code>rotate(a)</code>, and <code>translate(tx, ty)</code>. You can use <code>origin()</code> to return to the document&#39;s original state, with the axes in the center.</p><p><code>translate()</code> shifts the current 0/0 point by the specified amounts in x and y. It&#39;s relative and cumulative, rather than absolute:</p><div><pre><code class="language-julia">origin()
for i in range(0, 30, 6)
    sethue(HSV(i, 1, 1)) # from Colors
    setopacity(0.5)
    circle(0, 0, 20, :fillpreserve)
    setcolor(&quot;black&quot;)
    stroke()
    translate(25, 0)
end</code></pre></div><p><img src="assets/figures/translate.png" alt="translate"/></p><p><code>scale()</code> scales the current workspace by the specified amounts in x and y. Again, it&#39;s relative to the current scale, not to the document&#39;s original.</p><div><pre><code class="language-julia">origin()
for i in range(0, 30, 6)
    sethue(HSV(i, 1, 1)) # from Colors
    circle(0, 0, 90, :fillpreserve)
    setcolor(&quot;black&quot;)
    stroke()
    scale(0.8, 0.8)
end</code></pre></div><p><img src="assets/figures/scale.png" alt="scale"/></p><p><code>rotate()</code> rotates the current workspace by the specifed amount about the current 0/0 point. It&#39;s relative to the previous rotation, not to the document&#39;s original.</p><div><pre><code class="language-julia">origin()
for i in 1:8
    randomhue()
    squircle(Point(40, 0), 20, 30, :fillpreserve)
    sethue(&quot;black&quot;)
    stroke()
    rotate(pi/4)
end</code></pre></div><p><img src="assets/figures/rotate.png" alt="rotate"/></p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.scale" href="#Base.scale"><code>Base.scale</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">scale(x, y)</code></pre><p>Scale workspace by <code>x</code> and <code>y</code>.</p><p>Example:</p><pre><code class="language-none">scale(0.2, 0.3)</code></pre></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/Luxor.jl#L682-L691">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.rotate" href="#Luxor.rotate"><code>Luxor.rotate</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">rotate(a)</code></pre><p>Rotate workspace by <code>a</code> radians clockwise (from positive x-axis to positive y-axis).</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/Luxor.jl#L695-L699">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.translate" href="#Luxor.translate"><code>Luxor.translate</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">translate(x, y)
translate(point)</code></pre><p>Translate the workspace by <code>x</code> and <code>y</code> or by moving the origin to <code>pt</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/Luxor.jl#L703-L708">source</a><br/></section><p>The current matrix is a six element array, perhaps like this:</p><pre><code class="language-none">[1, 0, 0, 1, 0, 0]</code></pre><p><code>transform(a)</code> transforms the current workspace by &#39;multiplying&#39; the current matrix with matrix <code>a</code>. For example, <code>transform([1, 0, xskew, 1, 50, 0])</code> skews the current matrix by <code>xskew</code> radians and moves it 50 in x and 0 in y.</p><div><pre><code class="language-julia">function boxtext(p, t)
    sethue(&quot;grey30&quot;)
    box(p, 30, 50, :fill)
    sethue(&quot;white&quot;)
    textcentred(t, p)
end

for i in 0:5
    xskew = tand(i * 5.0)
    transform([1, 0, xskew, 1, 50, 0])
    boxtext(O, string(round(rad2deg(xskew), 1), &quot;°&quot;))
end</code></pre></div><p><img src="assets/figures/transform.png" alt="transform"/></p><p><code>getmatrix()</code> gets the current matrix, <code>setmatrix(a)</code> sets the matrix to array <code>a</code>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.getmatrix" href="#Luxor.getmatrix"><code>Luxor.getmatrix</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">getmatrix()</code></pre><p>Get the current Cairo matrix. Returns an array of six float64 numbers:</p><ul><li><p>xx component of the affine transformation</p></li><li><p>yx component of the affine transformation</p></li><li><p>xy component of the affine transformation</p></li><li><p>yy component of the affine transformation</p></li><li><p>x0 translation component of the affine transformation</p></li><li><p>y0 translation component of the affine transformation</p></li></ul><p>Some basic matrix transforms:</p><ul><li><p>translate</p></li></ul><p><code>transform([1, 0, 0, 1, dx, dy])</code> shifts by <code>dx</code>, <code>dy</code></p><ul><li><p>scale</p></li></ul><p><code>transform([fx 0 0 fy 0 0])</code> scales by <code>fx</code> and <code>fy</code></p><ul><li><p>rotate</p></li></ul><p><code>transform([cos(a), -sin(a), sin(a), cos(a), 0, 0])</code> rotates around to <code>a</code> radians</p><pre><code class="language-none">rotate around O: [c -s s c 0 0]</code></pre><ul><li><p>shear</p></li></ul><p><code>transform([1 0 a 1 0 0])</code> shears in x direction by <code>a</code></p><ul><li><p>shear in y: [1  B 0  1 0 0]</p></li><li><p>x-skew</p></li></ul><p><code>transform([1, 0, tan(a), 1, 0, 0])</code> skews in x by <code>a</code></p><ul><li><p>y-skew</p></li></ul><p><code>transform([1, tan(a), 0, 1, 0, 0])</code> skews in y by <code>a</code></p><ul><li><p>flip</p></li></ul><p><code>transform([fx, 0, 0, fy, centerx * (1 - fx), centery * (fy-1)])</code> flips with center at <code>centerx</code>/<code>centery</code></p><ul><li><p>reflect</p></li></ul><p><code>transform([1 0 0 -1 0 0])</code> reflects in xaxis</p><p><code>transform([-1 0 0 1 0 0])</code> reflects in yaxis</p><p>When a drawing is first created, the matrix looks like this:</p><pre><code class="language-none">getmatrix() = [1.0, 0.0, 0.0, 1.0, 0.0, 0.0]</code></pre><p>When the origin is moved to 400/400, it looks like this:</p><pre><code class="language-none">getmatrix() = [1.0, 0.0, 0.0, 1.0, 400.0, 400.0]</code></pre><p>To reset the matrix to the original:</p><pre><code class="language-none">setmatrix([1.0, 0.0, 0.0, 1.0, 0.0, 0.0])</code></pre></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L3-L71">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.setmatrix" href="#Luxor.setmatrix"><code>Luxor.setmatrix</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">setmatrix(m::Array)</code></pre><p>Change the current Cairo matrix to matrix <code>m</code>. Use <code>getmatrix()</code> to get the current matrix.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L77-L81">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.transform" href="#Luxor.transform"><code>Luxor.transform</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">transform(a::Array)</code></pre><p>Modify the current matrix by multiplying it by matrix <code>a</code>.</p><p>For example, to skew the current state by 45 degrees in x and move by 20 in y direction:</p><pre><code class="language-none">transform([1, 0, tand(45), 1, 0, 20])</code></pre><p>Use <code>getmatrix()</code> to get the current matrix.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L97-L107">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.crossproduct" href="#Luxor.crossproduct"><code>Luxor.crossproduct</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">crossproduct(p1::Point, p2::Point)</code></pre><p>This is the <em>perp dot product</em>, really, not the crossproduct proper (which is 3D):</p><pre><code class="language-none">`dot(p1, perpendicular(p2))`</code></pre></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/point.jl#L145-L151">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.blendmatrix" href="#Luxor.blendmatrix"><code>Luxor.blendmatrix</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">blendmatrix(b::Blend, m)</code></pre><p>Set the matrix of a blend.</p><p>To apply a sequence of matrix transforms to a blend:</p><pre><code class="language-none">A = [1 0 0 1 0 0]
Aj = cairotojuliamatrix(A)
Sj = scalingmatrix(2, .2) * Aj
Tj = translationmatrix(10, 0) * Sj
A1 = juliatocairomatrix(Tj)
blendmatrix(b, As)</code></pre></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/blends.jl#L155-L170">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.rotationmatrix" href="#Luxor.rotationmatrix"><code>Luxor.rotationmatrix</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">rotationmatrix(a)</code></pre><p>Return a 3 by 3 Julia matrix that will apply a rotation through <code>a</code> radians.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L120-L124">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.scalingmatrix" href="#Luxor.scalingmatrix"><code>Luxor.scalingmatrix</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">scalingmatrix(sx, sy)</code></pre><p>Return a 3 by 3 Julia matrix that will apply a scaling by <code>sx</code> and <code>sy</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L142-L146">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.translationmatrix" href="#Luxor.translationmatrix"><code>Luxor.translationmatrix</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">translationmatrix(x, y)</code></pre><p>Return a 3 by 3 Julia matrix that will apply a translation in <code>x</code> and <code>y</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L131-L135">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.cairotojuliamatrix" href="#Luxor.cairotojuliamatrix"><code>Luxor.cairotojuliamatrix</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">cairotojuliamatrix(c)</code></pre><p>Return a 3 by 3 Julia matrix that&#39;s the equivalent of the six-element Cairo matrix in <code>c</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L153-L157">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.juliatocairomatrix" href="#Luxor.juliatocairomatrix"><code>Luxor.juliatocairomatrix</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">juliatocairomatrix(c)</code></pre><p>Return a six-element Cairo matrix 3 that&#39;s the equivalent of the 3 by 3 Julia matrix in <code>c</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L162-L166">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.getscale" href="#Luxor.getscale"><code>Luxor.getscale</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">getscale(R::Matrix)
getscale()</code></pre><p>Get the current scale of a Julia matrix, or the current Luxor scale.</p><p>Returns a tuple of x and y values.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L197-L204">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.gettranslation" href="#Luxor.gettranslation"><code>Luxor.gettranslation</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">gettranslation(R::Matrix)
gettranslation()</code></pre><p>Get the current translation of a Julia matrix, or the current Luxor translation.</p><p>Returns a tuple of x and y values.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L215-L222">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Luxor.getrotation" href="#Luxor.getrotation"><code>Luxor.getrotation</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">getrotation(R::Matrix)</code></pre><p>Get rotation of a Julia matrix:</p><pre><code class="language-none">    | a  b  tx |
R = | c  d  ty |
    | 0  0  1  |</code></pre><p>The rotation angle is <code>atan2(-b, a)</code> or <code>atan2(c, d)</code>.</p><p>Get the current Luxor rotation:</p><pre><code class="language-none">getrotation()</code></pre></div><a class="source-link" target="_blank" href="https://github.com/JuliaGraphics/Luxor.jl/tree/3191fde0081540ca2ac350fa1c91040421cb1ad7/src/matrix.jl#L171-L186">source</a><br/></section><footer><hr/><a class="previous" href="text.html"><span class="direction">Previous</span><span class="title">Text</span></a><a class="next" href="clipping.html"><span class="direction">Next</span><span class="title">Clipping</span></a></footer></article></body></html>
