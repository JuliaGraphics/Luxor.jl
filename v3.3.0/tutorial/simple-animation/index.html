<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Simple animation · Luxor</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/luxor-docs.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Luxor logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Luxor</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction to Luxor</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../quickstart/">Quick and short</a></li><li><a class="tocitem" href="../basictutorial/">A more in-depth tutorial</a></li><li class="is-active"><a class="tocitem" href>Simple animation</a><ul class="internal"><li><a class="tocitem" href="#:-A-Julia-spinner"><span>1: A Julia spinner</span></a></li><li><a class="tocitem" href="#:-Combining-scenes"><span>2: Combining scenes</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../example/examples/">Simple examples</a></li><li><a class="tocitem" href="../../example/moreexamples/">More examples</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">How to guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../howto/createdrawings/">Create drawings</a></li><li><a class="tocitem" href="../../howto/simplegraphics/">Draw simple shapes</a></li><li><a class="tocitem" href="../../howto/geometrytools/">Use geometry tools</a></li><li><a class="tocitem" href="../../howto/tables-grids/">Work with tables and grids</a></li><li><a class="tocitem" href="../../howto/colors-styles/">Use colors and styles</a></li><li><a class="tocitem" href="../../howto/polygons/">Work with polygons</a></li><li><a class="tocitem" href="../../howto/text/">Add text</a></li><li><a class="tocitem" href="../../howto/clipping/">Clip graphics</a></li><li><a class="tocitem" href="../../howto/images/">Placing images</a></li><li><a class="tocitem" href="../../howto/turtle/">Turtle graphics</a></li><li><a class="tocitem" href="../../howto/animation/">Make animations</a></li><li><a class="tocitem" href="../../howto/livegraphics/">Live graphics and snapshots</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Explanations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../explanation/basics/">Basic concepts</a></li><li><a class="tocitem" href="../../explanation/pathspolygons/">Paths vs Polygon</a></li><li><a class="tocitem" href="../../explanation/perfectpixels/">Perfect pixels and antialising</a></li><li><a class="tocitem" href="../../explanation/transforms/">Transforms and matrices</a></li><li><a class="tocitem" href="../../explanation/imagematrix/">Image matrix</a></li><li><a class="tocitem" href="../../explanation/luxorcairo/">Luxor and Cairo</a></li><li><a class="tocitem" href="../../explanation/contributing/">Contributing</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/functionindex/">Alphabetical function list</a></li><li><a class="tocitem" href="../../reference/api/">Function reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Simple animation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Simple animation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGraphics/Luxor.jl/blob/master/docs/src/tutorial/simple-animation.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Make-simple-animations"><a class="docs-heading-anchor" href="#Make-simple-animations">Make simple animations</a><a id="Make-simple-animations-1"></a><a class="docs-heading-anchor-permalink" href="#Make-simple-animations" title="Permalink"></a></h1><p>Luxor.jl can help you build simple animations, by assembling a series of PNG images into an animated GIF.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>To make richer and more complex animations, use <a href="https://github.com/Wikunia/Javis.jl">Javis.jl</a>.</p></div></div><h2 id=":-A-Julia-spinner"><a class="docs-heading-anchor" href="#:-A-Julia-spinner">1: A Julia spinner</a><a id=":-A-Julia-spinner-1"></a><a class="docs-heading-anchor-permalink" href="#:-A-Julia-spinner" title="Permalink"></a></h2><p>The first thing to do is to create a <code>Movie</code> object. This acts as a useful object that we can pass from function to function.</p><pre><code class="language-julia hljs">using Luxor
mymovie = Movie(400, 400, &quot;mymovie&quot;)</code></pre><p>The resulting animation will be 400 × 400 pixels.</p><p>To make the graphics, define a function called <code>frame()</code> (it doesn&#39;t have to be called that, but it&#39;s a good name) which accepts two arguments, a Scene object, and a framenumber (integer).</p><p>A movie consists of one or more scenes. A scene is an object which determines how many drawings should be made into a sequence and what function should be used to make them. The framenumber lets you keep track of where you are in a scene.</p><p>Here&#39;s a simple <code>frame</code> function which creates a drawing.</p><pre><code class="language-julia hljs">function frame(scene::Scene, framenumber::Int64)
    background(&quot;white&quot;)
    norm_framenumber = rescale(framenumber,
        scene.framerange.start,
        scene.framerange.stop,
        0, 1)
    rotate(norm_framenumber * 2π)
    juliacircles(100)
end</code></pre><p>This function is responsible for drawing all the graphics for a single frame. The incoming frame number is converted (normalized) to lie between 0 and 1 - ie. between the first frame and the last frame of the scene. It&#39;s multiplied by 2π and used as input to <code>rotate</code>.</p><p>So as the framenumber goes from 1 to <code>n</code>, each drawing will be rotated by an increasing angle from 0 to 2π. For example, for a scene with 60 frames, framenumber 30 will set a rotation value of about <code>2π * 0.5</code>.</p><p>The Scene object has details about the number of frames for this scene, the number of times the <code>frame</code> function is called.</p><p>To actually build the animation, the <a href="../../reference/api/#Luxor.animate-Tuple{Movie, Scene}"><code>animate</code></a> function takes an array of one or more scenes and builds a GIF.</p><pre><code class="language-julia hljs">animate(mymovie,
        [
            Scene(mymovie, frame, 1:60)
        ],
    creategif=true,
    pathname=&quot;juliaspinner.gif&quot;)</code></pre><p><img src="../../assets/figures/juliaspinner.gif" alt="julia spinner"/></p><p>Obviously, if you increase the range from 1:60 to, say, 1:300, you&#39;ll generate 300 drawings rather than 60, and the rotation will take longer and will be much smoother. Unless, of course, you change the framerate to be something other than the default <code>30</code>.</p><h2 id=":-Combining-scenes"><a class="docs-heading-anchor" href="#:-Combining-scenes">2: Combining scenes</a><a id=":-Combining-scenes-1"></a><a class="docs-heading-anchor-permalink" href="#:-Combining-scenes" title="Permalink"></a></h2><p>In the next example, we&#39;ll construct an animation that uses different scenes.</p><p>Consider this animation, showing the sun&#39;s position for each hour of a 24 hour day. (It&#39;s only a model...)</p><p><img src="../../assets/figures/sun24.gif" alt="sun24 animation"/></p><p>Again, start by creating a movie, a useful handle that we can pass from function to function. We&#39;ll specify 24 frames for the entire animation.</p><pre><code class="language-julia hljs">sun24demo = Movie(400, 400, &quot;sun24&quot;, 0:23)</code></pre><p>We&#39;ll define a simple <code>backgroundfunction</code> function that draws a background that will be used for all frames (since animated GIFs like constant backgrounds):</p><pre><code class="language-julia hljs">function backgroundfunction(scene::Scene, framenumber)
    background(&quot;black&quot;)
end</code></pre><p>A <code>nightskyfunction</code> draws the night sky, covering the entire drawing:</p><pre><code class="language-julia hljs">function nightskyfunction(scene::Scene, framenumber)
    sethue(&quot;midnightblue&quot;)
    box(O, 400, 400, :fill)
end</code></pre><p>A <code>dayskyfunction</code> draws the daytime sky:</p><pre><code class="language-julia hljs">function dayskyfunction(scene::Scene, framenumber)
    sethue(&quot;skyblue&quot;)
    box(O, 400, 400, :fill)
end</code></pre><p>The <code>sunfunction</code> draws a sun at 24 positions during the day. Since the framenumber will be a number between 0 and 23, this can be easily converted to lie between 0 and 2π.</p><pre><code class="language-julia hljs">function sunfunction(scene::Scene, framenumber)
    t = rescale(framenumber, 0, 23, 2pi, 0)
    gsave()
        sethue(&quot;yellow&quot;)
        circle(polar(150, t), 20, :fill)
    grestore()
end</code></pre><p>And finally, tere&#39;s a <code>groundfunction</code> that draws the ground, the lower half of the drawing:</p><pre><code class="language-julia hljs">function groundfunction(scene::Scene, framenumber)
    gsave()
    sethue(&quot;brown&quot;)
    box(Point(O.x, O.y + 100), 400, 200, :fill)
    grestore()
    sethue(&quot;white&quot;)
end</code></pre><p>To combine these together, we&#39;ll define a group of Scenes that make up the movie. The scenes specify which functions are to be used, and for which frames:</p><pre><code class="language-julia hljs">backdrop  = Scene(sun24demo, backgroundfunction, 0:23)   # every frame
nightsky  = Scene(sun24demo, nightskyfunction, 0:6)      # midnight to 06:00
nightsky1 = Scene(sun24demo, nightskyfunction, 17:23)    # 17:00 to 23:00
daysky    = Scene(sun24demo, dayskyfunction, 5:19)       # 05:00 to 19:00
sun       = Scene(sun24demo, sunfunction, 6:18)          # 06:00 to 18:00
ground    = Scene(sun24demo, groundfunction, 0:23)       # every frame</code></pre><p>Finally, the <code>animate</code> function scans all the scenes in the scenelist for the  movie, and calls the specified functions for each frame to build the animation:</p><pre><code class="language-julia hljs">animate(sun24demo, [
   backdrop, nightsky, nightsky1, daysky, sun, ground
   ],
   framerate=5,
   creategif=true)</code></pre><p><img src="../../assets/figures/sun24.gif" alt="sun24 animation"/></p><p>Notice that for some frames, such as frame 0, 1, or 23, three of the functions are called: for others, such as 7 and 8, four or more functions are called.</p><h3 id="An-alternative"><a class="docs-heading-anchor" href="#An-alternative">An alternative</a><a id="An-alternative-1"></a><a class="docs-heading-anchor-permalink" href="#An-alternative" title="Permalink"></a></h3><p>As this is a very simple example, there is of course an easier wayto make this particular animation.</p><p>We can use the incoming framenumber, rescaled, as the master parameter that determines the position and appearance of all the graphics.</p><pre><code class="language-julia hljs">function frame(scene, framenumber)
    background(&quot;black&quot;)
    n   = rescale(framenumber, scene.framerange.start, scene.framerange.stop, 0, 1)
    n2π = rescale(n, 0, 1, 0, 2π)
    sethue(n, 0.5, 0.5)
    box(BoundingBox(), :fill)
    if 0.25 &lt; n &lt; 0.75
        sethue(&quot;yellow&quot;)
        circle(polar(150, n2π + π/2), 20, :fill)
    end
    if n &lt; 0.25 || n &gt; 0.75
        sethue(&quot;white&quot;)
        circle(polar(150, n2π + π/2), 20, :fill)
    end
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../basictutorial/">« A more in-depth tutorial</a><a class="docs-footer-nextpage" href="../../example/examples/">Simple examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.18 on <span class="colophon-date" title="Wednesday 1 June 2022 11:19">Wednesday 1 June 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
